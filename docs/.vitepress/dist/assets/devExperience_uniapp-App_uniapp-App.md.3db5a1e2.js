import{_ as s,o as a,c as n,S as p}from"./chunks/framework.0fe8f473.js";const l="/qianduan-knowledge-system/assets/应用认领.64e659bc.png",e="/qianduan-knowledge-system/assets/生成签名.5fe1c957.png",o="/qianduan-knowledge-system/assets/上传apk.1804edcb.png",w=JSON.parse('{"title":"uniapp 开发 App 问题","description":"","frontmatter":{},"headers":[],"relativePath":"devExperience/uniapp-App/uniapp-App.md","filePath":"devExperience/uniapp-App/uniapp-App.md"}'),t={name:"devExperience/uniapp-App/uniapp-App.md"},c=p(`<h1 id="uniapp-开发-app-问题" tabindex="-1">uniapp 开发 App 问题 <a class="header-anchor" href="#uniapp-开发-app-问题" aria-label="Permalink to &quot;uniapp 开发 App 问题&quot;">​</a></h1><h2 id="_1-web-view-引入-html-页面-安卓手机实现页面缩放" tabindex="-1">1. web-view 引入 HTML 页面，安卓手机实现页面缩放 <a class="header-anchor" href="#_1-web-view-引入-html-页面-安卓手机实现页面缩放" aria-label="Permalink to &quot;1. web-view 引入 HTML 页面，安卓手机实现页面缩放&quot;">​</a></h2><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">web-view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://www.baidu.com/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">web-view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">var wv; //计划创建的webview</span></span>
<span class="line"><span style="color:#A6ACCD;">export default </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">onReady</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// #ifdef APP-PLUS</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    var currentWebview </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">$scope</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">$getAppWebview</span><span style="color:#A6ACCD;">(); </span><span style="color:#676E95;font-style:italic;">//获取当前页面的webview对象</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">setTimeout</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">function</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">wv</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">currentWebview</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">children</span><span style="color:#F07178;">()[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">wv</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setStyle</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> scalable</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">); </span><span style="color:#676E95;font-style:italic;">//如果是页面初始化调用时，需要延时一下</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/* onLoad() {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // #ifdef APP-PLUS</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        wv = plus.webview.create(&quot;&quot;,&quot;custom-webview&quot;,{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            plusrequire:&quot;none&quot;, //禁止远程网页使用plus的API，有些使用mui制作的网页可能会监听plus.key，造成关闭页面混乱，可以通过这种方式禁止</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            &#39;uni-app&#39;: &#39;none&#39;, //不加载uni-app渲染层框架，避免样式冲突</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            top:uni.getSystemInfoSync().statusBarHeight+44 //放置在titleNView下方。如果还想在webview上方加个地址栏的什么的，可以继续降低TOP值</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            })</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            wv.loadURL(&quot;https://www.baidu.com/&quot;)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            var currentWebview = this.$scope.$getAppWebview(); //此对象相当于html5plus里的plus.webview.currentWebview()。在uni-app里vue页面直接使用plus.webview.currentWebview()无效currentWebview.append(wv);//一定要append到当前的页面里！！！才能跟随当前页面一起做动画，一起关闭</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            setTimeout(function() {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">                console.log(&#39;wv.getStyle()&#39;,wv.getStyle())</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">                }, 1000);//如果是首页的onload调用时需要延时一下，二级页面无需延时，可直接获取</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // #endif</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">}, */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">data</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    return </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  methods: </span><span style="color:#89DDFF;">{},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h2 id="app-上传应用宝-应用认领命令" tabindex="-1">App 上传应用宝，应用认领命令 <a class="header-anchor" href="#app-上传应用宝-应用认领命令" aria-label="Permalink to &quot;App 上传应用宝，应用认领命令&quot;">​</a></h2><p>app 上传应用宝，apk 上传后弹出提示，需要认领应用</p><img src="`+l+'"><p>根据官方提示：就是下载官方提供的一个未签名的 apk，然后用自己的 app 密钥和别名对其进行签名，然后把签名成功的 apk 上传上去，等待官方审核成功之后，就认领成功了。 操作步骤：</p><ul><li><p>1）将下载的空包 <code>tap_unsign.apk</code> 和自己的应用的签名文件 <code>property-certificate.keystore</code>拷贝到同一个文件夹下，如 <code>D:\\temp\\</code>；</p></li><li><p>2）cmd 进入目标 <code>D:\\temp&gt;</code>，然后输入命令：</p><div class="language-cmd"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">jarsigner </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">verbose </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">keystore property</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">certificate.keystore </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">signedjar tap_sign.apk tap_unsign.apk property</span></span></code></pre></div><p><strong>说明：</strong> <code>tap_sign.apk</code>就是<code>property-certificate.keystore</code>签名后的<code>tap_unsign.apk</code>的文件名；<code>property</code>：是创建<code>property-certificate.keystore</code>的别名</p><img src="'+e+'"></li></ul><p><strong>注意：</strong></p><ol><li>密码输入错误，会出现 Keystore was tampered with, or password was incorrect（密钥库被篡改，或者密码不正确)；</li><li>密码正确，但提示找不到 xxx 的证书链。xxx 必须引用包含私有密钥和相应的公共密钥证书链的有效密钥库密钥条目，，即 是别名填写错误。</li></ol><p>【所以，密钥文件、别名、密钥文件密码都要正确，才能给 apk 签名成功】</p><ul><li><p>3） 然后将签名后的<code>tap_sign.apk</code>上传到腾讯即可。</p><img src="'+o+'"></li></ul>',13),r=[c];function i(y,D,F,A,d,u){return a(),n("div",null,r)}const g=s(t,[["render",i]]);export{w as __pageData,g as default};
