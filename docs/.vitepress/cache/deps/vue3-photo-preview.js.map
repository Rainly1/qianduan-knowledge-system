{
  "version": 3,
  "sources": ["../../../../node_modules/vue3-photo-preview/src/symbols.ts", "../../../../node_modules/vue3-photo-preview/src/PhotoProvider/useItems.ts", "../../../../node_modules/vue3-photo-preview/src/PhotoProvider/useVisible.ts", "../../../../node_modules/vue3-photo-preview/src/PhotoProvider/useIndex.ts", "../../../../node_modules/vue3-photo-preview/src/PhotoView/Spinner.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoView/Spinner.vue?vue&type=template&id=bfba7e90&lang.js", "../../../../node_modules/vue3-photo-preview/src/utils/getSuitableImageSize.ts", "../../../../node_modules/vue3-photo-preview/src/PhotoView/useLoadImage.ts", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/isObject.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/_freeGlobal.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/_root.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/now.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/_trimmedEndIndex.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/_baseTrim.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/_Symbol.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/_getRawTag.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/_objectToString.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/_baseGetTag.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/isObjectLike.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/isSymbol.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/toNumber.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/debounce.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/throttle.js", "../../../../node_modules/vue3-photo-preview/src/PhotoView/useWindowResize.ts", "../../../../node_modules/vue3-photo-preview/src/types.ts", "../../../../node_modules/vue3-photo-preview/src/utils/getAnimateOrigin.ts", "../../../../node_modules/vue3-photo-preview/src/utils/isTouchDevice.ts", "../../../../node_modules/vue3-photo-preview/src/constant.ts", "../../../../node_modules/vue3-photo-preview/src/utils/withContinuousTap.ts", "../../../../node_modules/vue3-photo-preview/src/utils/getPositionOnMoveOrScale.ts", "../../../../node_modules/vue3-photo-preview/src/utils/getEdgeInfo.ts", "../../../../node_modules/vue3-photo-preview/src/utils/getMultipleTouchPosition.ts", "../../../../node_modules/vue3-photo-preview/src/PhotoView/useMoveImage.ts", "../../../../node_modules/vue3-photo-preview/src/PhotoView/index.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoView/index.vue?vue&type=template&id=10b188d1&lang.js", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/useBodyEffect.ts", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/useInnerWidth.ts", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/Close.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/Close.vue?vue&type=template&id=112c245a&lang.js", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/ArrowLeft.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/ArrowLeft.vue?vue&type=template&id=6e2f760b&lang.js", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/ArrowRight.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/ArrowRight.vue?vue&type=template&id=d5f73570&lang.js", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/RotateLeft.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/RotateLeft.vue?vue&type=template&id=b2d23392&lang.js", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/RotateRight.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/RotateRight.vue?vue&type=template&id=698afa9c&lang.js", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/FlipHorizontal.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/FlipHorizontal.vue?vue&type=template&id=15ac38a6&lang.js", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/FlipVertical.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/FlipVertical.vue?vue&type=template&id=17ff0d78&lang.js", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/Download.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/Download.vue?vue&type=template&id=7428b2fd&lang.js", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/useAnimationHandle.ts", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/index.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoSlider/index.vue?vue&type=template&id=6c981bcd&lang.js", "../../../../node_modules/vue3-photo-preview/src/PhotoProvider/index.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoProvider/index.vue?vue&type=template&id=4c12d6c6&lang.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/_arrayMap.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/isArray.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/_baseToString.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/toString.js", "../../../../node_modules/vue3-photo-preview/node_modules/lodash-es/uniqueId.js", "../../../../node_modules/vue3-photo-preview/src/PhotoConsumer/index.vue", "../../../../node_modules/vue3-photo-preview/src/PhotoConsumer/index.vue?vue&type=template&id=1325df3c&lang.js", "../../../../node_modules/vue3-photo-preview/src/index.ts"],
  "sourcesContent": ["import { UpdateItemType, RemoveItemType, HandleShowType } from './types';\nimport { InjectionKey } from 'vue';\n\nexport const updateItemKey: InjectionKey<UpdateItemType> = Symbol();\n\nexport const removeItemKey: InjectionKey<RemoveItemType> = Symbol();\n\nexport const handleShowKey: InjectionKey<HandleShowType> = Symbol();\n", "import { ref, Ref } from 'vue';\nimport { ItemType, UpdateItemType, RemoveItemType } from '../types';\n\ntype useItemsReturn = {\n  items: Ref<ItemType[]>;\n  updateItem: UpdateItemType;\n  removeItem: RemoveItemType;\n}\n\nexport default function useItems(index: Ref<number>): useItemsReturn {\n  const items = ref<ItemType[]>([]);\n\n  const getElementIndex = (children: HTMLCollection, child: HTMLElement | null | undefined) => {\n    return child ? Array.prototype.indexOf.call(children, child) : -1;\n  };\n\n  const sortItems = (items: ItemType[]) => {\n    const children = items[0].originRef?.parentNode?.children;\n    if (children && children.length) {\n      items.sort((cur, next) => getElementIndex(children, cur.originRef) - getElementIndex(children, next.originRef));\n    }\n  };\n\n  const updateItem = (item: ItemType) => {\n    const index = items.value.findIndex(({ key }) => item.key === key);\n    if (index > -1) {\n      items.value.splice(index, 1, item);\n    } else {\n      items.value.push(item);\n      sortItems(items.value);\n    }\n  };\n\n  const removeItem = (key: string) => {\n    const nextItems = items.value.filter((item) => item.key !== key);\n    const nextEndIndex = nextItems.length - 1;\n\n    items.value = nextItems;\n    index.value = Math.max(Math.min(index.value, nextEndIndex), 0);\n  };\n\n  return {\n    items,\n    updateItem,\n    removeItem,\n  };\n}\n", "import { ref, Ref } from 'vue';\nimport { HandleShowType, ItemType } from '../types';\n\ntype useVisibleReturn = {\n  visible: Ref<boolean>;\n  handleHide: () => void;\n  handleShow: HandleShowType;\n}\n\nexport default function useVisible(\n  items: Ref<ItemType[]>,\n  index: Ref<number>,\n  onVisibleChange: () => void\n): useVisibleReturn {\n  const visible = ref(false);\n\n  const handleHide = () => {\n    visible.value = false;\n    onVisibleChange();\n  };\n\n  const handleShow = (key: string) => {\n    const itemIndex = items.value.findIndex(item => item.key === key);\n    if (itemIndex > -1) {\n      index.value = itemIndex;\n      visible.value = true;\n      onVisibleChange();\n    }\n  };\n\n  return {\n    visible,\n    handleHide,\n    handleShow,\n  };\n}\n", "import { ref, Ref } from 'vue';\n\ntype useIndexReturn = {\n  index: Ref<number>;\n  updateIndex: (newIndex: number) => void;\n}\n\nexport default function useIndex(onIndexChange: () => void): useIndexReturn {\n  const index = ref(0);\n\n  const updateIndex = (newIndex: number) => {\n    index.value = newIndex;\n    onIndexChange();\n  };\n\n  return {\n    index,\n    updateIndex,\n  };\n}\n", "<template>\n  <div class=\"PhotoView__Spinner\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32 32\"\n      width=\"36\"\n      height=\"36\"\n      fill=\"white\"\n    >\n      <path\n        opacity=\".25\"\n        d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\n      />\n      <path\n        d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\n      />\n    </svg>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__rotate {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes PhotoView__delayShow {\n  0%,\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.PhotoView__Spinner {\n  animation: PhotoView__delayShow 0.4s linear both;\n\n  svg {\n    display: block;\n    animation: PhotoView__rotate 0.6s linear infinite;\n  }\n}\n\n</style>\n", "<template>\n  <div class=\"PhotoView__Spinner\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32 32\"\n      width=\"36\"\n      height=\"36\"\n      fill=\"white\"\n    >\n      <path\n        opacity=\".25\"\n        d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\n      />\n      <path\n        d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\n      />\n    </svg>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__rotate {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes PhotoView__delayShow {\n  0%,\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.PhotoView__Spinner {\n  animation: PhotoView__delayShow 0.4s linear both;\n\n  svg {\n    display: block;\n    animation: PhotoView__rotate 0.6s linear infinite;\n  }\n}\n\n</style>\n", "export default function getSuitableImageSize(\n  naturalWidth: number,\n  naturalHeight: number,\n  rotate: number,\n): {\n  width: number;\n  height: number;\n} {\n  let { innerWidth, innerHeight } = window;\n  // 如果图片不是水平，则调换宽高\n  const isVertical = rotate % 180 !== 0;\n  if (isVertical) {\n    [innerWidth, innerHeight] = [innerHeight, innerWidth];\n  }\n\n  let width;\n  let height;\n\n  // 缩放到和窗口一样所需要的比例\n  const scaleWidth = innerWidth / naturalWidth;\n  const scaleHeight = innerHeight / naturalHeight;\n\n  if (naturalWidth < innerWidth && naturalHeight < innerHeight) {\n    // 如果图片原始宽度未超过容器尺寸，则使用原始尺寸\n    width = naturalWidth;\n    height = naturalHeight;\n  } else {\n    // 否则缩放图片使之恰好放入\n    if (scaleWidth < scaleHeight) {\n      width = innerWidth;\n      height = innerWidth * (naturalHeight / naturalWidth);\n    } else {\n      width = innerHeight * (naturalWidth / naturalHeight);\n      height = innerHeight;\n    }\n  }\n\n  return {\n    width,\n    height\n  };\n}\n", "import { ref, Ref, watch } from 'vue';\nimport getSuitableImageSize from '../utils/getSuitableImageSize';\n\nexport default function useLoadImage(src: Ref<string>): {\n  width: Ref<number>;\n  height: Ref<number>;\n  loaded: Ref<boolean>;\n  naturalWidth: Ref<number>;\n  naturalHeight: Ref<number>;\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void;\n} {\n  const naturalWidth = ref(0);\n  const naturalHeight = ref(0);\n  const width = ref(0);\n  const height = ref(0);\n  const loaded = ref(false);\n\n  function setSuitableImageSize(actualWidth: number, actualHeight: number, rotate: number) {\n    const imageSize = getSuitableImageSize(actualWidth, actualHeight, rotate);\n    width.value = imageSize.width;\n    height.value = imageSize.height;\n  }\n\n  const loadImage = (src: string) => {\n    loaded.value = false;\n\n    const img = new Image();\n\n    img.onload = () => {\n      naturalWidth.value = img.naturalWidth;\n      naturalHeight.value = img.naturalHeight;\n      setSuitableImageSize(naturalWidth.value, naturalHeight.value, 0);\n      loaded.value = true;\n    };\n\n    img.src = src;\n  };\n\n  loadImage(src.value);\n\n  watch(src, () => {\n    loadImage(src.value);\n  });\n\n  return {\n    width,\n    height,\n    loaded,\n    naturalWidth,\n    naturalHeight,\n    setSuitableImageSize\n  };\n}\n", "/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n", "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n", "import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n", "import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n", "/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n", "import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n", "import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n", "import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n", "import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n", "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n", "import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n", "import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n", "import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n", "import { Ref, onBeforeUnmount } from 'vue';\nimport throttle from 'lodash-es/throttle';\n\nexport default function useWindowResize(\n  naturalWidth: Ref<number>, naturalHeight: Ref<number>, rotate: Ref<number>,\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void,\n): void {\n\n  const handleResize = throttle(() => {\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n  }, 8);\n\n  window.addEventListener('resize', handleResize);\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', handleResize);\n  });\n}\n", "export type ItemType = {\n  // 唯一标识\n  key: string;\n  // 图片地址\n  src: string;\n  // 控住图片显示的节点\n  originRef?: HTMLElement | null;\n  // 图片介绍\n  intro?: string | null;\n  // 图片下载名称\n  downloadName?: string | null;\n}\n\nexport type OriginRectType = {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n} | null;\n\nexport type UpdateItemType = (item: ItemType) => void;\n\nexport type RemoveItemType = (key: string) => void;\n\nexport type HandleShowType = (key: string) => void;\n\n// 动画类型\nexport enum ShowAnimateEnum {\n  None,\n  In,\n  Out,\n}\n\n// 触摸状态\nexport enum TouchTypeEnum {\n  Normal,\n  X, // x 轴只能水平切换图片\n  Y, // y 轴只能撤销图片\n  Scale, // 缩放模式\n}\n\n// 边缘状态\nexport enum EdgeTypeEnum {\n  Left,\n  Right,\n  Top,\n  Bottom,\n}\n", "import { OriginRectType } from \"../types\";\n\nexport default function getAnimateOrigin(originRect: OriginRectType): string | null {\n  if (originRect) {\n    const { innerWidth, innerHeight } = window;\n    // 动画的元素宽高为 0，计算触发的点的中心到中点的距离即是 AnimateOrigin（粗略计算）\n    const xOrigin = originRect.left + originRect.width / 2 - innerWidth / 2;\n    const yOrigin = originRect.top + originRect.height / 2 - innerHeight / 2;\n    return `${xOrigin}px ${yOrigin}px`;\n  }\n  return null;\n}\n", "/**\n * 当前设备是否支持触摸事件\n */\nconst isTouchDevice = typeof document !== 'undefined' && 'ontouchstart' in document.documentElement;\n\nexport default isTouchDevice;\n", "/**\n * 图片间隔\n */\nexport const horizontalOffset = 20;\n\n/**\n * 最小初始响应距离\n */\nexport const minStartTouchOffset = 10;\n\n/**\n * 最小切换图片距离\n */\nexport const minSwitchImageOffset = 40;\n\n/**\n * 最大缩放度（若图片足够大，则会超出该值）\n */\nexport const maxScale = 6;\n", "import debounce from 'lodash-es/debounce';\n\nexport type TapFuncType = (clientX: number, clientY: number, e: TouchEvent | MouseEvent) => void;\n\nexport default function withContinuousTap(\n  singleTap: TapFuncType,\n  doubleTap: TapFuncType\n): TapFuncType {\n  // 当前连续点击次数\n  let continuousCount = 0;\n\n  const withSingleTap = debounce((...args: [number, number, TouchEvent | MouseEvent]) => {\n    continuousCount = 0;\n    singleTap(...args);\n  }, 300);\n\n  return function invokeTap(...args) {\n    continuousCount += 1;\n    withSingleTap(...args);\n    if (continuousCount >= 2) {\n      withSingleTap.cancel();\n      continuousCount = 0;\n      doubleTap(...args);\n    }\n  };\n}\n", "/**\n * 获取移动或缩放之后的中心点\n */\nexport default function getPositionOnMoveOrScale({\n  x,\n  y,\n  clientX,\n  clientY,\n  fromScale,\n  toScale\n}: {\n  x: number,\n  y: number,\n  clientX: number,\n  clientY: number,\n  fromScale: number,\n  toScale: number\n}): {\n  x: number,\n  y: number,\n  scale: number,\n} {\n  const { innerWidth, innerHeight } = window;\n  // 缩放前的图片的中心坐标\n  const imageCenterClientX = innerWidth / 2 + x;\n  const imageCenterClientY = innerHeight / 2 + y;\n  // 放大偏移量\n  const offsetScale = toScale / fromScale;\n  // 缩放后的偏移量(为保证点击的点相对于视图位置不变，需要将缩放多出来的尺寸通过 translate 平衡掉)\n  const originX = -(clientX - imageCenterClientX) * (offsetScale - 1);\n  const originY = -(clientY - imageCenterClientY) * (offsetScale - 1);\n\n  return {\n    x: originX + x,\n    y: originY + y,\n    scale: toScale,\n  };\n}\n", "import { EdgeTypeEnum } from '../types';\n\n/**\n * 获取图片拖拽到边缘需要的值\n */\nexport function getEdgeInfo({\n  width,\n  height,\n  scale,\n  rotate,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number\n}): {\n  edgeLeft: number,\n  edgeRight: number,\n  edgeTop: number,\n  edgeBottom: number,\n} {\n  // 如果图片不是水平，则调换宽高\n  const isVertical = rotate % 180 !== 0;\n  if (isVertical) {\n    [width, height] = [height, width];\n  }\n\n  const { innerWidth, innerHeight } = window;\n  const currentWidth = width * scale;\n  const currentHeight = height * scale;\n\n  let edgeLeft, edgeRight, edgeTop, edgeBottom;\n\n  if (currentWidth > innerWidth) {\n    edgeLeft = (currentWidth - innerWidth) / 2;\n    edgeRight = -(currentWidth - innerWidth) / 2;\n  } else {\n    edgeLeft = 0;\n    edgeRight = 0;\n  }\n\n  if (currentHeight > innerHeight) {\n    edgeTop = (currentHeight - innerHeight) / 2;\n    edgeBottom = -(currentHeight - innerHeight) / 2;\n  } else {\n    edgeTop = 0;\n    edgeBottom = 0;\n  }\n\n  return {\n    edgeLeft,\n    edgeRight,\n    edgeTop,\n    edgeBottom,\n  };\n}\n\n/**\n * 获取边缘类型\n */\nexport function getEdgeTypes({\n  width,\n  height,\n  scale,\n  rotate,\n  x,\n  y,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number,\n  x: number,\n  y: number,\n}): EdgeTypeEnum[] {\n  const position = getEdgeInfo({ width, height, scale, rotate });\n  const edgeTypes: EdgeTypeEnum[] = [];\n\n  if (x === position.edgeLeft) {\n    edgeTypes.push(EdgeTypeEnum.Left);\n  }\n  if (x === position.edgeRight) {\n    edgeTypes.push(EdgeTypeEnum.Right);\n  }\n  if (y === position.edgeTop) {\n    edgeTypes.push(EdgeTypeEnum.Top);\n  }\n  if (y === position.edgeBottom) {\n    edgeTypes.push(EdgeTypeEnum.Bottom);\n  }\n\n  return edgeTypes;\n}\n\n/**\n * 获取标准值\n */\nexport function getStandardPosition({\n  width,\n  height,\n  scale,\n  rotate,\n  x,\n  y,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number,\n  x: number,\n  y: number,\n}): {\n  x: number,\n  y: number,\n  scale: number,\n} {\n  const { edgeLeft, edgeRight, edgeTop, edgeBottom } = getEdgeInfo({ width, height, scale, rotate });\n\n  if (x > edgeLeft) {\n    x = edgeLeft;\n  }\n  if (x < edgeRight) {\n    x = edgeRight;\n  }\n  if (y > edgeTop) {\n    y = edgeTop;\n  }\n  if (y < edgeBottom) {\n    y = edgeBottom;\n  }\n\n  return { x, y, scale };\n}\n", "/**\n * 从 Touch 事件中获取两个触控中心的位置\n * @param e TouchEvent\n */\nexport default function getMultipleTouchPosition(e: TouchEvent): {\n  clientX: number,\n  clientY: number,\n  touchLength: number\n} {\n  const { clientX, clientY } = e.touches[0];\n  if (e.touches.length >= 2) {\n    const { clientX: nextClientX, clientY: nextClientY } = e.touches[1];\n    return {\n      clientX: (clientX + nextClientX) / 2,\n      clientY: (clientY + nextClientY) / 2,\n      touchLength: Math.sqrt(Math.pow(nextClientX - clientX, 2) + Math.pow(nextClientY - clientY, 2)),\n    };\n  }\n  return { clientX, clientY, touchLength: 0 };\n}\n", "import { Ref, ref } from 'vue';\nimport isTouchDevice from '../utils/isTouchDevice';\nimport throttle from 'lodash-es/throttle';\nimport { TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport { minStartTouchOffset, maxScale } from '../constant';\nimport withContinuousTap from '../utils/withContinuousTap';\nimport getPositionOnMoveOrScale from '../utils/getPositionOnMoveOrScale';\nimport { getStandardPosition, getEdgeTypes } from '../utils/getEdgeInfo';\nimport getMultipleTouchPosition from '../utils/getMultipleTouchPosition';\n\ntype useMoveImageReturn = {\n  x: Ref<number>;\n  y: Ref<number>;\n  scale: Ref<number>;\n  rotate: Ref<number>;\n  touched: Ref<boolean>;\n  handleMouseDown: (e: MouseEvent) => void;\n  handleTouchStart: (e: TouchEvent) => void;\n  handleWheel: (e: WheelEvent) => void;\n  handleRotateLeft: () => void;\n  handleRotateRight: () => void;\n}\n\nexport default function useMoveImage(\n  width: Ref<number>,\n  height: Ref<number>,\n  naturalWidth: Ref<number>,\n  naturalHeight: Ref<number>,\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void,\n  onTouchStart: (clientX: number, clientY: number) => void,\n  onTouchMove: (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => void,\n  onTouchEnd: (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => void,\n  onSingleTap: (clientX: number, clientY: number, e: MouseEvent | TouchEvent) => void,\n): useMoveImageReturn {\n  // 图片 x 偏移量\n  const x = ref(0);\n  // 图片 y 偏移量\n  const y = ref(0);\n  // 图片缩放程度\n  const scale = ref(1);\n  // 图片旋转角度\n  const rotate = ref(0);\n  // 图片是否处于触摸状态\n  const touched = ref(false);\n  // 触摸开始时 x 的坐标\n  const clientX = ref(0);\n  // 触摸开始时 y 的坐标\n  const clientY = ref(0);\n  // 初始触摸状态\n  const touchType = ref(TouchTypeEnum.Normal);\n  // 上一次图片的 x 偏移量\n  const lastX = ref(0);\n  // 上一次图片的 y 偏移量\n  const lastY = ref(0);\n  // 上一次 touch 的长度\n  const lastTouchLength = ref(0);\n  // 上一次的图片缩放程度\n  const lastScale = ref(1);\n  // 边缘状态(用于缩放图片判断)\n  let edgeTypes: EdgeTypeEnum[] = [];\n\n  const handleMouseDown = (e: MouseEvent) => {\n    if (isTouchDevice) return;\n\n    handleDown(e.clientX, e.clientY, 0);\n\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n  };\n\n  const handleTouchStart = (e: TouchEvent) => {\n    if (!isTouchDevice) return;\n\n    const touch = getMultipleTouchPosition(e);\n    handleDown(touch.clientX, touch.clientY, touch.touchLength);\n\n    window.addEventListener('touchmove', handleTouchMove);\n    window.addEventListener('touchend', handleTouchEnd);\n  };\n\n  const handleDown = (newClientX: number, newClientY: number, touchLength: number) => {\n    touched.value = true;\n    clientX.value = newClientX;\n    clientY.value = newClientY;\n    lastTouchLength.value = touchLength;\n    lastScale.value = scale.value;\n    edgeTypes = getEdgeTypes({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: lastX.value,\n      y: lastY.value\n    });\n\n    onTouchStart(newClientX, newClientY);\n  };\n\n  const handleMouseMove = (e: MouseEvent) => {\n    if (isTouchDevice || !touched.value) return;\n\n    handleMove(e.clientX, e.clientY, 0);\n  };\n\n  const handleTouchMove = (e: TouchEvent) => {\n    if (!isTouchDevice || !touched.value) return;\n\n    const touch = getMultipleTouchPosition(e);\n    handleMove(touch.clientX, touch.clientY, touch.touchLength);\n  };\n\n  const handleMove = throttle((newClientX: number, newClientY: number, touchLength: number) => {\n    // 初始化触摸状态\n    if (touchType.value === TouchTypeEnum.Normal) {\n      if (scale.value !== 1 || touchLength) {\n        touchType.value = TouchTypeEnum.Scale;\n      } else {\n        const isMoveX = Math.abs(newClientX - clientX.value) > minStartTouchOffset;\n        const isMoveY = Math.abs(newClientY - clientY.value) > minStartTouchOffset;\n\n        if (!isMoveX && !isMoveY) return;\n\n        // 水平方向优先\n        touchType.value = isMoveX ? TouchTypeEnum.X : TouchTypeEnum.Y;\n      }\n    }\n\n    onTouchMove(touchType.value, newClientX, newClientY, lastScale.value, edgeTypes);\n\n    const newX = newClientX - clientX.value;\n    const newY = newClientY - clientY.value;\n    if (touchType.value === TouchTypeEnum.Y) {\n      x.value = newX + lastX.value;\n      y.value = newY + lastY.value;\n    }\n    if (touchType.value === TouchTypeEnum.Scale) {\n      if (touchLength) {\n        const endScale = scale.value + ((touchLength - lastTouchLength.value) / 100 / 2) * scale.value;\n        const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth.value / width.value)), 1);\n        handleToScale(toScale, newClientX, newClientY);\n        lastTouchLength.value = touchLength;\n      } else {\n        // 处于左边缘情况，右划交给父级处理，处于右边缘情况，左划交给父级处理\n        if (\n          !(newX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) &&\n          !(newX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n        ) {\n          x.value = newX + lastX.value;\n        }\n        y.value = newY + lastY.value;\n      }\n    }\n  }, 8, { trailing: false });\n\n  const handleMouseUp = (e: MouseEvent) => {\n    if (isTouchDevice) return;\n\n    handleUp(e.clientX, e.clientY, e);\n\n    window.removeEventListener('mousemove', handleMouseMove);\n    window.removeEventListener('mouseup', handleMouseUp);\n  };\n\n  const handleTouchEnd = (e: TouchEvent) => {\n    if (!isTouchDevice) return;\n\n    const touch = e.changedTouches[0];\n    handleUp(touch.clientX, touch.clientY, e);\n\n    window.removeEventListener('touchmove', handleTouchMove);\n    window.removeEventListener('touchend', handleTouchEnd);\n  };\n\n  const onDoubleTap = (newClientX: number, newClientY: number) => {\n    if (touchType.value !== TouchTypeEnum.Normal) return;\n\n    if (scale.value === 1) {\n      const toScale = Math.max(2, naturalWidth.value / width.value);\n      const position = getPositionOnMoveOrScale({\n        x: x.value,\n        y: y.value,\n        clientX: newClientX,\n        clientY: newClientY,\n        fromScale: scale.value,\n        toScale,\n      });\n\n      x.value = position.x;\n      y.value = position.y;\n      scale.value = position.scale;\n    } else {\n      x.value = 0;\n      y.value = 0;\n      scale.value = 1;\n    }\n  };\n\n  const onTap = withContinuousTap(onSingleTap, onDoubleTap);\n\n  const handleUp = (newClientX: number, newClientY: number, e: TouchEvent | MouseEvent) => {\n    if (clientX.value === newClientX && clientY.value === newClientY) {\n      onTap(newClientX, newClientY, e);\n    }\n\n    onTouchEnd(touchType.value, newClientX, newClientY, lastScale.value, edgeTypes);\n\n    if (touchType.value === TouchTypeEnum.Y) {\n      x.value = 0;\n      y.value = 0;\n    }\n\n    if (touchType.value === TouchTypeEnum.Scale) {\n      setStandardPosition({\n        width: width.value,\n        height: height.value,\n        scale: scale.value,\n        rotate: rotate.value,\n        x: x.value,\n        y: y.value\n      });\n    }\n\n    touched.value = false;\n    touchType.value = TouchTypeEnum.Normal;\n    clientX.value = 0;\n    clientY.value = 0;\n    lastX.value = x.value;\n    lastY.value = y.value;\n  };\n\n  const handleWheel = (e: WheelEvent) => {\n    const endScale = scale.value - e.deltaY / 100 / 2;\n    const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth.value / width.value)), 1);\n    handleToScale(toScale, e.clientX, e.clientY);\n  };\n\n  const handleToScale = (newScale: number, newClientX: number, newClientY: number) => {\n    const position = getPositionOnMoveOrScale({\n      x: x.value,\n      y: y.value,\n      clientX: newClientX,\n      clientY: newClientY,\n      fromScale: scale.value,\n      toScale: newScale,\n    });\n\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: position.scale,\n      rotate: rotate.value,\n      x: position.x,\n      y: position.y\n    });\n  };\n\n  const setStandardPosition = (position: {\n    width: number; height: number; scale: number; rotate: number; x: number, y: number\n  }) => {\n    const standardPosition = getStandardPosition(position);\n    x.value = standardPosition.x;\n    y.value = standardPosition.y;\n    lastX.value = standardPosition.x;\n    lastY.value = standardPosition.y;\n    scale.value = standardPosition.scale;\n  };\n\n  const handleRotateLeft = () => {\n    rotate.value = rotate.value - 90;\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: x.value,\n      y: y.value\n    });\n  };\n\n  const handleRotateRight = () => {\n    rotate.value = rotate.value + 90;\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: x.value,\n      y: y.value\n    });\n  };\n\n  return {\n    x,\n    y,\n    scale,\n    touched,\n    handleMouseDown,\n    handleTouchStart,\n    handleWheel,\n    rotate,\n    handleRotateLeft,\n    handleRotateRight\n  };\n}\n", "<template>\n  <div\n    v-if=\"loaded\"\n    class=\"PhotoView__PhotoWrap\"\n    :style=\"{\n      width: `${width}px`,\n      height: `${height}px`\n    }\"\n  >\n    <div\n      class=\"PhotoView__PhotoBox\"\n      :class=\"{\n        'PhotoView__animateIn': showAnimateType === ShowAnimateEnum.In,\n        'PhotoView__animateOut': showAnimateType === ShowAnimateEnum.Out,\n      }\"\n      :style=\"{\n        transformOrigin: getAnimateOrigin(originRect),\n        width: showAnimateType === ShowAnimateEnum.In || showAnimateType === ShowAnimateEnum.Out ? '0' : '100%'\n      }\"\n    >\n      <img\n        class=\"PhotoView__Photo\"\n        :src=\"src\"\n        :style=\"{\n          width: `${width}px`,\n          height: `${height}px`,\n          transform: getTransform(),\n          transition: touched ? undefined : 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)',\n        }\"\n        @mousedown.prevent=\"handleMouseDown\"\n        @touchstart.prevent=\"handleTouchStart\"\n        @wheel=\"handleWheel\"\n      >\n    </div>\n  </div>\n  <spinner v-else />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, toRefs } from 'vue';\nimport Spinner from './Spinner.vue';\nimport useLoadImage from './useLoadImage';\nimport useWindowResize from './useWindowResize';\nimport { OriginRectType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport getAnimateOrigin from '../utils/getAnimateOrigin';\nimport useMoveImage from './useMoveImage';\n\nexport default defineComponent({\n  name: 'PhotoView',\n  components: {\n    Spinner\n  },\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 触发打开模态框的位置信息\n     */\n    originRect: {\n      type: Object as PropType<OriginRectType>,\n      default: null,\n    },\n    /**\n     * 动画类型\n     */\n    showAnimateType: {\n      type: Number as PropType<ShowAnimateEnum>,\n      default: null,\n    }\n  },\n  emits: ['touchStart', 'touchMove', 'touchEnd', 'singleTap'],\n  setup(props, { emit }) {\n    const { src } = toRefs(props);\n    const { width, height, loaded, naturalWidth, naturalHeight, setSuitableImageSize } = useLoadImage(src);\n\n    const onTouchStart = (clientX: number, clientY: number) => {\n      emit('touchStart', clientX, clientY);\n    };\n    const onTouchMove = (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchMove', touchType, clientX, clientY, lastScale, edgeTypes);\n    };\n    const onTouchEnd = (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchEnd', touchType, clientX, clientY, lastScale, edgeTypes);\n    };\n    const onSingleTap = (clientX: number, clientY: number, e: MouseEvent | TouchEvent) => {\n      emit('singleTap', clientX, clientY, e);\n    };\n\n    const {\n      x, y, scale, rotate, touched,\n      handleMouseDown, handleTouchStart, handleWheel, handleRotateLeft, handleRotateRight\n    } = useMoveImage(\n      width, height, naturalWidth, naturalHeight,\n      setSuitableImageSize, onTouchStart, onTouchMove, onTouchEnd, onSingleTap,\n    );\n\n    useWindowResize(naturalWidth, naturalHeight, rotate, setSuitableImageSize);\n\n    return {\n      width,\n      height,\n      loaded,\n      x,\n      y,\n      scale,\n      touched,\n      handleMouseDown,\n      handleTouchStart,\n      handleWheel,\n      rotate,\n      handleRotateLeft,\n      handleRotateRight\n    };\n  },\n  data() {\n    return {\n      ShowAnimateEnum,\n      // 翻转\n      isFlipHorizontal: false,\n      isFlipVertical: false,\n    };\n  },\n  methods: {\n    getAnimateOrigin,\n    toggleFlipHorizontal() {\n      this.isFlipHorizontal = !this.isFlipHorizontal;\n    },\n    toggleFlipVertical() {\n      this.isFlipVertical = !this.isFlipVertical;\n    },\n    getTransform() {\n      const scaleX = `${this.isFlipHorizontal ? '-' : ''}${this.scale}`;\n      const scaleY = `${this.isFlipVertical ? '-' : ''}${this.scale}`;\n      const transform: Record<string, string> = {\n        matrix: `${scaleX}, 0, 0, ${scaleY}, ${this.x}, ${this.y}`,\n      };\n      if (this.rotate) {\n        transform.rotate = `${this.rotate}deg`;\n      }\n\n      let str = '';\n      Object.keys(transform).forEach(name => {\n        str += `${name}(${transform[name]})`;\n      });\n\n      return str;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__animateIn {\n  from {\n    opacity: 0.4;\n    transform: scale(0.2);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes PhotoView__animateOut {\n  from {\n    opacity: 1;\n    transform: scale(1);\n  }\n  to {\n    opacity: 0;\n    transform: scale(0.2);\n  }\n}\n\n.PhotoView__PhotoWrap {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .PhotoView__PhotoBox {\n    width: 0;\n    height: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &.PhotoView__animateIn {\n      opacity: 0.4;\n      animation: PhotoView__animateIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    &.PhotoView__animateOut {\n      opacity: 1;\n      animation: PhotoView__animateOut 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    .PhotoView__Photo {\n      touch-action: none;\n      cursor: grab;\n      display: block;\n\n      &:active {\n        cursor: grabbing;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div\n    v-if=\"loaded\"\n    class=\"PhotoView__PhotoWrap\"\n    :style=\"{\n      width: `${width}px`,\n      height: `${height}px`\n    }\"\n  >\n    <div\n      class=\"PhotoView__PhotoBox\"\n      :class=\"{\n        'PhotoView__animateIn': showAnimateType === ShowAnimateEnum.In,\n        'PhotoView__animateOut': showAnimateType === ShowAnimateEnum.Out,\n      }\"\n      :style=\"{\n        transformOrigin: getAnimateOrigin(originRect),\n        width: showAnimateType === ShowAnimateEnum.In || showAnimateType === ShowAnimateEnum.Out ? '0' : '100%'\n      }\"\n    >\n      <img\n        class=\"PhotoView__Photo\"\n        :src=\"src\"\n        :style=\"{\n          width: `${width}px`,\n          height: `${height}px`,\n          transform: getTransform(),\n          transition: touched ? undefined : 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)',\n        }\"\n        @mousedown.prevent=\"handleMouseDown\"\n        @touchstart.prevent=\"handleTouchStart\"\n        @wheel=\"handleWheel\"\n      >\n    </div>\n  </div>\n  <spinner v-else />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, toRefs } from 'vue';\nimport Spinner from './Spinner.vue';\nimport useLoadImage from './useLoadImage';\nimport useWindowResize from './useWindowResize';\nimport { OriginRectType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport getAnimateOrigin from '../utils/getAnimateOrigin';\nimport useMoveImage from './useMoveImage';\n\nexport default defineComponent({\n  name: 'PhotoView',\n  components: {\n    Spinner\n  },\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 触发打开模态框的位置信息\n     */\n    originRect: {\n      type: Object as PropType<OriginRectType>,\n      default: null,\n    },\n    /**\n     * 动画类型\n     */\n    showAnimateType: {\n      type: Number as PropType<ShowAnimateEnum>,\n      default: null,\n    }\n  },\n  emits: ['touchStart', 'touchMove', 'touchEnd', 'singleTap'],\n  setup(props, { emit }) {\n    const { src } = toRefs(props);\n    const { width, height, loaded, naturalWidth, naturalHeight, setSuitableImageSize } = useLoadImage(src);\n\n    const onTouchStart = (clientX: number, clientY: number) => {\n      emit('touchStart', clientX, clientY);\n    };\n    const onTouchMove = (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchMove', touchType, clientX, clientY, lastScale, edgeTypes);\n    };\n    const onTouchEnd = (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchEnd', touchType, clientX, clientY, lastScale, edgeTypes);\n    };\n    const onSingleTap = (clientX: number, clientY: number, e: MouseEvent | TouchEvent) => {\n      emit('singleTap', clientX, clientY, e);\n    };\n\n    const {\n      x, y, scale, rotate, touched,\n      handleMouseDown, handleTouchStart, handleWheel, handleRotateLeft, handleRotateRight\n    } = useMoveImage(\n      width, height, naturalWidth, naturalHeight,\n      setSuitableImageSize, onTouchStart, onTouchMove, onTouchEnd, onSingleTap,\n    );\n\n    useWindowResize(naturalWidth, naturalHeight, rotate, setSuitableImageSize);\n\n    return {\n      width,\n      height,\n      loaded,\n      x,\n      y,\n      scale,\n      touched,\n      handleMouseDown,\n      handleTouchStart,\n      handleWheel,\n      rotate,\n      handleRotateLeft,\n      handleRotateRight\n    };\n  },\n  data() {\n    return {\n      ShowAnimateEnum,\n      // 翻转\n      isFlipHorizontal: false,\n      isFlipVertical: false,\n    };\n  },\n  methods: {\n    getAnimateOrigin,\n    toggleFlipHorizontal() {\n      this.isFlipHorizontal = !this.isFlipHorizontal;\n    },\n    toggleFlipVertical() {\n      this.isFlipVertical = !this.isFlipVertical;\n    },\n    getTransform() {\n      const scaleX = `${this.isFlipHorizontal ? '-' : ''}${this.scale}`;\n      const scaleY = `${this.isFlipVertical ? '-' : ''}${this.scale}`;\n      const transform: Record<string, string> = {\n        matrix: `${scaleX}, 0, 0, ${scaleY}, ${this.x}, ${this.y}`,\n      };\n      if (this.rotate) {\n        transform.rotate = `${this.rotate}deg`;\n      }\n\n      let str = '';\n      Object.keys(transform).forEach(name => {\n        str += `${name}(${transform[name]})`;\n      });\n\n      return str;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__animateIn {\n  from {\n    opacity: 0.4;\n    transform: scale(0.2);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes PhotoView__animateOut {\n  from {\n    opacity: 1;\n    transform: scale(1);\n  }\n  to {\n    opacity: 0;\n    transform: scale(0.2);\n  }\n}\n\n.PhotoView__PhotoWrap {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .PhotoView__PhotoBox {\n    width: 0;\n    height: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &.PhotoView__animateIn {\n      opacity: 0.4;\n      animation: PhotoView__animateIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    &.PhotoView__animateOut {\n      opacity: 1;\n      animation: PhotoView__animateOut 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    .PhotoView__Photo {\n      touch-action: none;\n      cursor: grab;\n      display: block;\n\n      &:active {\n        cursor: grabbing;\n      }\n    }\n  }\n}\n</style>\n", "import { Ref, watch } from 'vue';\n\nexport default function useBodyEffect(visible: Ref<boolean>): void {\n  const { style } = document.body;\n  const originalOverflow = style.overflow;\n\n  watch(visible, () => {\n    if (visible.value) {\n      style.overflow = 'hidden';\n    } else {\n      style.overflow = originalOverflow;\n    }\n  });\n}\n", "import { ref, Ref, onBeforeUnmount } from 'vue';\nimport throttle from 'lodash-es/throttle';\n\nexport default function useInnerWidth(): { innerWidth: Ref<number> } {\n  const innerWidth = ref(window.innerWidth);\n\n  const handleResize = throttle(() => {\n    innerWidth.value = window.innerWidth;\n  }, 8);\n\n  window.addEventListener('resize', handleResize);\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', handleResize);\n  });\n\n  return {\n    innerWidth\n  };\n}\n", "<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    viewBox=\"0 0 1000 1000\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    viewBox=\"0 0 1000 1000\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    viewBox=\"0 0 1068 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    p-id=\"2740\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      d=\"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <svg\n    viewBox=\"0 0 1068 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    p-id=\"2740\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      d=\"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "import { Ref, ref, watch } from 'vue';\nimport { ItemType, ShowAnimateEnum, OriginRectType } from '../types';\n\ntype useAnimationHandleReturn = {\n  photoVisible: Ref<boolean>;\n  showAnimateType: Ref<ShowAnimateEnum>;\n  originRect: Ref<OriginRectType>;\n  onShowAnimateEnd: () => void;\n}\n\nexport default function useAnimationHandle(visible: Ref<boolean>, currentItem: Ref<ItemType>): useAnimationHandleReturn {\n  const photoVisible = ref(visible.value);\n  const showAnimateType = ref<ShowAnimateEnum>(ShowAnimateEnum.None);\n  const originRect = ref<OriginRectType>(null);\n\n  watch(visible, () => {\n    const originRef = currentItem.value.originRef;\n    // 点击打开按钮和关闭时收集位置信息，用于过渡动画\n    if (originRef && originRef.nodeType === 1 && originRef.children.length > 0) {\n      const { top, left, width, height } = originRef.getBoundingClientRect();\n      originRect.value = {\n        left, top, width, height\n      };\n    } else {\n      originRect.value = null;\n    }\n\n    if (visible.value) {\n      // 设置动画类型\n      showAnimateType.value = ShowAnimateEnum.In;\n      // 显示图片\n      photoVisible.value = true;\n    } else {\n      // 设置动画类型\n      showAnimateType.value = ShowAnimateEnum.Out;\n    }\n  });\n\n  // 动画结束的回调\n  const onShowAnimateEnd = () => {\n    // 动画完成才关闭弹窗\n    if (showAnimateType.value === ShowAnimateEnum.Out) {\n      photoVisible.value = false;\n    }\n    showAnimateType.value = ShowAnimateEnum.None;\n  };\n\n  return {\n    photoVisible,\n    showAnimateType,\n    originRect,\n    onShowAnimateEnd\n  };\n}\n", "<template>\n  <teleport to=\"body\">\n    <div\n      v-if=\"photoVisible\"\n      class=\"PhotoSlider__Wrapper\"\n      :class=\"{\n        'PhotoSlider__Clean': showAnimateType !== ShowAnimateEnum.None ,\n        'PhotoSlider__Hide': !overlayVisible,\n      }\"\n    >\n      <div\n        class=\"PhotoSlider__Backdrop\"\n        :class=\"{\n          'PhotoSlider__fadeIn': showAnimateType === ShowAnimateEnum.In,\n          'PhotoSlider__fadeOut': showAnimateType === ShowAnimateEnum.Out\n        }\"\n        :style=\"{\n          background: `rgba(0, 0, 0, ${backdropOpacity})`,\n        }\"\n        @animationend=\"onShowAnimateEnd(), resetBackdropOpacity()\"\n      />\n      <div class=\"PhotoSlider__BannerWrap\">\n        <div class=\"PhotoSlider__Counter\">\n          {{ index + 1 }} / {{ items.length }}\n        </div>\n        <div class=\"PhotoSlider__BannerRight\">\n          <download\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleDownload\"\n          />\n          <rotate-left\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateLeft\"\n          />\n          <rotate-right\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateRight\"\n          />\n          <flip-horizontal\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipHorizontal\"\n          />\n          <flip-vertical\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipVertical\"\n          />\n          <close\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleClickClose\"\n          />\n        </div>\n      </div>\n      <div\n        v-for=\"(item, currentIndex) in showItems\"\n        :key=\"item.key\"\n        class=\"PhotoSlider__PhotoBox\"\n        :style=\"{\n          left: getItemLeft(currentIndex),\n          transition: getItemTransition(),\n          transform: getItemTransform()\n        }\"\n        @transitionend=\"resetNeedTransition\"\n        @click=\"handleClickMask\"\n      >\n        <photo-view\n          :ref=\"(val) => setPhotoViewRef(item.key, val)\"\n          :origin-rect=\"originRect\"\n          :show-animate-type=\"showAnimateType\"\n          :src=\"item.src\"\n          @click.stop\n          @touchStart=\"handleTouchStart\"\n          @touchMove=\"handleTouchMove\"\n          @touchEnd=\"handleTouchEnd\"\n          @singleTap=\"handleSingleTap\"\n        />\n      </div>\n      <template v-if=\"!isTouchDevice\">\n        <div\n          v-if=\"loop || index > 0\"\n          class=\"PhotoSlider__ArrowLeft\"\n          @click=\"handlePrevious\"\n        >\n          <arrow-left />\n        </div>\n        <div\n          v-if=\"loop || index < items.length - 1\"\n          class=\"PhotoSlider__ArrowRight\"\n          @click=\"handleNext\"\n        >\n          <arrow-right />\n        </div>\n      </template>\n      <div\n        v-if=\"currentItem.intro\"\n        class=\"PhotoSlider__FooterWrap\"\n      >\n        {{ currentItem.intro }}\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, computed, toRefs, PropType } from 'vue';\nimport PhotoView from '../PhotoView/index.vue';\nimport { horizontalOffset, minSwitchImageOffset } from '../constant';\nimport useBodyEffect from './useBodyEffect';\nimport useInnerWidth from './useInnerWidth';\nimport Close from './Close.vue';\nimport ArrowLeft from './ArrowLeft.vue';\nimport ArrowRight from './ArrowRight.vue';\nimport RotateLeft from './RotateLeft.vue';\nimport RotateRight from './RotateRight.vue';\nimport FlipHorizontal from './FlipHorizontal.vue';\nimport FlipVertical from './FlipVertical.vue';\nimport Download from './Download.vue';\nimport useAnimationHandle from './useAnimationHandle';\nimport { ItemType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport isTouchDevice from '../utils/isTouchDevice';\n\nexport default defineComponent({\n  name: 'PhotoSlider',\n  components: {\n    PhotoView,\n    Close,\n    ArrowLeft,\n    ArrowRight,\n    RotateLeft,\n    RotateRight,\n    FlipHorizontal,\n    FlipVertical,\n    Download,\n  },\n  props: {\n    /**\n     * 图片列表\n     */\n    items: {\n      type: Array as PropType<ItemType[]>,\n      required: true,\n    },\n    /**\n     * 图片当前索引\n     */\n    index: {\n      type: Number,\n      required: true,\n    },\n    /**\n     * 是否显示模态框\n     */\n    visible: {\n      type: Boolean,\n      required: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 是否切换显隐覆盖物\n     */\n    toggleOverlay: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * 是否循环显示预览图\n     */\n    loop: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 下载图片方法，不传使用内置的下载方法\n     */\n    downloadMethod: {\n      type: Function as PropType<(item: ItemType) => void | null>,\n      default: null,\n    }\n  },\n  emits: ['clickPhoto', 'clickMask', 'changeIndex', 'closeModal'],\n  setup(props) {\n    const { items, index, visible } = toRefs(props);\n    const currentItem = computed<ItemType>(() => {\n      return items.value[index.value] || {};\n    });\n\n    useBodyEffect(visible);\n    const {\n      photoVisible, showAnimateType, originRect, onShowAnimateEnd\n    } = useAnimationHandle(visible, currentItem);\n    const { innerWidth } = useInnerWidth();\n\n    return {\n      innerWidth,\n      currentItem,\n      photoVisible,\n      showAnimateType,\n      originRect,\n      onShowAnimateEnd,\n    };\n  },\n  data() {\n    return {\n      // 常量\n      horizontalOffset,\n      ShowAnimateEnum,\n      isTouchDevice,\n      // 触摸相关\n      touched: false,\n      hasMove: false,\n      needTransition: false,\n      clientX: 0,\n      clientY: 0,\n      touchMoveX: 0,\n      backdropOpacity: this.defaultBackdropOpacity,\n      // 是否显示覆盖物\n      overlayVisible: true,\n      // 虚拟下标，用于循环预览\n      virtualIndex: 0,\n      // photo-view 子组件\n      photoViewRefs: {} as { [key: string]: InstanceType<typeof PhotoView> },\n    };\n  },\n  computed: {\n    // 当前显示的图片列表\n    showItems() {\n      const len = this.items.length;\n      if (this.loop) {\n        const connect = this.items.concat(this.items).concat(this.items);\n        return connect.slice(len + this.index - 1, len + this.index + 2);\n      }\n      return this.items.slice(Math.max(this.index - 1, 0), Math.min(this.index + 2, len));\n    }\n  },\n  created() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  },\n  beforeUpdate() {\n    this.photoViewRefs = {};\n  },\n  methods: {\n    defaultDownloadMethod(item: ItemType) {\n      const paths = item.src.split('/');\n      const name = paths[paths.length - 1];\n\n      const img = new Image();\n      img.setAttribute('crossOrigin', 'Anonymous');\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        const context = canvas.getContext('2d');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context?.drawImage(img, 0, 0, img.width, img.height);\n        canvas.toBlob(blob => {\n          if (blob) {\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.download = item.downloadName || name;\n            a.href = url;\n            a.dispatchEvent(new MouseEvent('click'));\n            // 释放 createObjectURL 创建的内存对象（否则以 blob:http 开头的 url 可以到浏览器访问，多次创建内存会不断增大）\n            URL.revokeObjectURL(url);\n          }\n        });\n      };\n      img.src = item.src + '?v=' + Date.now();\n    },\n    handleDownload() {\n      const item = this.items[this.index];\n      if (typeof this.downloadMethod === 'function') {\n        this.downloadMethod(item);\n      } else {\n        this.defaultDownloadMethod(item);\n      }\n    },\n    toggleFlipHorizontal() {\n      this.photoViewRefs[this.currentItem.key]?.toggleFlipHorizontal();\n    },\n    toggleFlipVertical() {\n      this.photoViewRefs[this.currentItem.key]?.toggleFlipVertical();\n    },\n    handleRotateLeft() {\n      this.photoViewRefs[this.currentItem.key]?.handleRotateLeft();\n    },\n    handleRotateRight() {\n      this.photoViewRefs[this.currentItem.key]?.handleRotateRight();\n    },\n    setPhotoViewRef(key: string, ref: InstanceType<typeof PhotoView>) {\n      this.photoViewRefs[key] = ref;\n    },\n    handleKeyDown(e: KeyboardEvent) {\n      if (this.visible) {\n        switch (e.code) {\n          case 'ArrowLeft':\n            this.handlePrevious();\n            break;\n          case 'ArrowRight':\n            this.handleNext();\n            break;\n          case 'Escape':\n            this.handleClickClose();\n            break;\n        }\n      }\n    },\n    handleSingleTap(_clientX: number, _clientY: number, e: MouseEvent | TouchEvent) {\n      if (this.toggleOverlay) {\n        this.overlayVisible = !this.overlayVisible;\n      }\n      this.$emit('clickPhoto', e);\n    },\n    handleTouchStart(clientX: number, clientY: number) {\n      this.touched = true;\n      this.needTransition = false;\n      this.clientX = clientX;\n      this.clientY = clientY;\n    },\n    handleTouchMove(touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) {\n      if (touchType === TouchTypeEnum.Scale && lastScale !== 1) {\n        this.handleTouchScaleMove(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalMove(clientX, clientY);\n      }\n    },\n    handleTouchScaleMove(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      let touchMoveX = clientX - this.clientX;\n      if (\n        (touchMoveX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) ||\n        (touchMoveX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n      ) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n    },\n    handleTouchHorizontalMove(clientX: number) {\n      let touchMoveX = clientX - this.clientX;\n\n      // 非循环模式下，第一张和最后一张超出时拖拽距离减半\n      if (\n        !this.loop &&\n        ((this.index === 0 && touchMoveX > 0) || (this.index === this.items.length - 1 && touchMoveX < 0))\n      ) {\n        touchMoveX = touchMoveX / 2;\n      }\n\n      this.hasMove = clientX !== this.clientX;\n      this.touchMoveX = touchMoveX;\n    },\n    handleTouchVerticalMove(clientX: number, clientY: number) {\n      let touchMoveY = Math.abs(clientY - this.clientY);\n      const opacity = Math.max(\n        Math.min(this.defaultBackdropOpacity, this.defaultBackdropOpacity - touchMoveY / 100 / 4),\n        0\n      );\n\n      this.hasMove = clientX !== this.clientX || clientY !== this.clientY;\n      this.backdropOpacity = opacity;\n    },\n    handleTouchEnd(touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) {\n      if (touchType === TouchTypeEnum.Scale && lastScale !== 1) {\n        this.handleTouchScaleEnd(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalEnd(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalEnd(clientY);\n      }\n      // 只要移动过，则需要动画过渡\n      if (this.hasMove) {\n        this.needTransition = true;\n      }\n      this.touched = false;\n      this.hasMove = false;\n      this.clientX = 0;\n      this.clientY = 0;\n      this.touchMoveX = 0;\n    },\n    handleTouchScaleEnd(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset && edgeTypes.includes(EdgeTypeEnum.Right)) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset && edgeTypes.includes(EdgeTypeEnum.Left)) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchHorizontalEnd(clientX: number) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchVerticalEnd(clientY: number) {\n      const offsetY = clientY - this.clientY;\n\n      if (Math.abs(offsetY) > window.innerHeight * 0.14) {\n        this.$emit('closeModal');\n      } else {\n        this.resetBackdropOpacity();\n      }\n    },\n    resetBackdropOpacity() {\n      this.backdropOpacity = this.defaultBackdropOpacity;\n    },\n    resetNeedTransition() {\n      this.needTransition = false;\n    },\n    handlePrevious() {\n      const len = this.items.length;\n      if (!this.loop && this.index === 0) return;\n      this.$emit('changeIndex', (this.index + len - 1) % len);\n      this.virtualIndex -= 1;\n    },\n    handleNext() {\n      const len = this.items.length;\n      if (!this.loop && this.index === len - 1) return;\n      this.$emit('changeIndex', (this.index + 1) % len);\n      this.virtualIndex += 1;\n    },\n    handleClickMask(e: MouseEvent | TouchEvent) {\n      this.$emit('clickMask', e);\n    },\n    handleClickClose() {\n      this.$emit('closeModal');\n    },\n    // 当预览下一张时，currentIndex 会从 1 变成 0，相当于左移一个单位，所以此时只需要右移一个单位的来平衡 transform 的左移即可\n    getItemLeft(currentIndex: number) {\n      let index = this.virtualIndex + currentIndex;\n      // 非循环模式的第一张图片不需要左移，因为只有两张图片，左侧没有图片\n      if (this.loop || this.index !== 0) {\n        index -= 1;\n      }\n      return `${(this.innerWidth + this.horizontalOffset) * index}px`;\n    },\n    getItemTransition() {\n      const transition = 'transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)';\n      if (this.needTransition) {\n        return transition;\n      }\n      if (this.hasMove) {\n        return undefined;\n      }\n      return this.shouldTransition ? transition : undefined;\n    },\n    getItemTransform() {\n      return `translate3d(${-(this.innerWidth + this.horizontalOffset) * this.virtualIndex + this.touchMoveX}px, 0px, 0px)`;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__fade {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Clean {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 0;\n      }\n    }\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Hide {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n  }\n}\n\n.PhotoSlider__Wrapper {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 2000;\n  user-select: none;\n\n  .PhotoSlider__Backdrop {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n\n    &.PhotoSlider__fadeIn {\n      opacity: 0;\n      animation: PhotoView__fade 0.4s linear both;\n    }\n    &.PhotoSlider__fadeOut {\n      opacity: 1;\n      animation: PhotoView__fade 0.4s linear both reverse;\n    }\n  }\n\n  .PhotoSlider__BannerWrap {\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 44px;\n    color: white;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .PhotoSlider__Counter {\n      padding: 0 10px;\n      font-size: 14px;\n      opacity: 0.75;\n    }\n\n    .PhotoSlider__BannerRight {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n\n      .PhotoSlider__BannerIcon {\n        vertical-align: top;\n        box-sizing: border-box;\n        padding: 10px;\n        opacity: 0.75;\n        cursor: pointer;\n        transition: all 0.2s linear;\n\n        @media (any-hover: hover){\n          &:hover {\n            opacity: 1;\n          }\n        }\n      }\n    }\n  }\n\n  .PhotoSlider__PhotoBox {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    overflow: hidden;\n  }\n\n  .PhotoSlider__ArrowLeft {\n    left: 0;\n  }\n\n  .PhotoSlider__ArrowRight {\n    right: 0;\n  }\n\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    margin: auto 0 auto 0;\n    width: 70px;\n    height: 100px;\n    opacity: 0.7;\n    z-index: 20;\n    cursor: pointer;\n    transition: opacity 0.2s linear;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    svg {\n      box-sizing: content-box;\n      padding: 10px;\n      width: 24px;\n      height: 24px;\n      fill: white;\n      background: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  .PhotoSlider__FooterWrap {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    box-sizing: border-box;\n    width: 100%;\n    min-height: 44px;\n    padding: 10px;\n    line-height: 1.5;\n    font-size: 14px;\n    text-align: justify;\n    color: #ccc;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <teleport to=\"body\">\n    <div\n      v-if=\"photoVisible\"\n      class=\"PhotoSlider__Wrapper\"\n      :class=\"{\n        'PhotoSlider__Clean': showAnimateType !== ShowAnimateEnum.None ,\n        'PhotoSlider__Hide': !overlayVisible,\n      }\"\n    >\n      <div\n        class=\"PhotoSlider__Backdrop\"\n        :class=\"{\n          'PhotoSlider__fadeIn': showAnimateType === ShowAnimateEnum.In,\n          'PhotoSlider__fadeOut': showAnimateType === ShowAnimateEnum.Out\n        }\"\n        :style=\"{\n          background: `rgba(0, 0, 0, ${backdropOpacity})`,\n        }\"\n        @animationend=\"onShowAnimateEnd(), resetBackdropOpacity()\"\n      />\n      <div class=\"PhotoSlider__BannerWrap\">\n        <div class=\"PhotoSlider__Counter\">\n          {{ index + 1 }} / {{ items.length }}\n        </div>\n        <div class=\"PhotoSlider__BannerRight\">\n          <download\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleDownload\"\n          />\n          <rotate-left\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateLeft\"\n          />\n          <rotate-right\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateRight\"\n          />\n          <flip-horizontal\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipHorizontal\"\n          />\n          <flip-vertical\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipVertical\"\n          />\n          <close\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleClickClose\"\n          />\n        </div>\n      </div>\n      <div\n        v-for=\"(item, currentIndex) in showItems\"\n        :key=\"item.key\"\n        class=\"PhotoSlider__PhotoBox\"\n        :style=\"{\n          left: getItemLeft(currentIndex),\n          transition: getItemTransition(),\n          transform: getItemTransform()\n        }\"\n        @transitionend=\"resetNeedTransition\"\n        @click=\"handleClickMask\"\n      >\n        <photo-view\n          :ref=\"(val) => setPhotoViewRef(item.key, val)\"\n          :origin-rect=\"originRect\"\n          :show-animate-type=\"showAnimateType\"\n          :src=\"item.src\"\n          @click.stop\n          @touchStart=\"handleTouchStart\"\n          @touchMove=\"handleTouchMove\"\n          @touchEnd=\"handleTouchEnd\"\n          @singleTap=\"handleSingleTap\"\n        />\n      </div>\n      <template v-if=\"!isTouchDevice\">\n        <div\n          v-if=\"loop || index > 0\"\n          class=\"PhotoSlider__ArrowLeft\"\n          @click=\"handlePrevious\"\n        >\n          <arrow-left />\n        </div>\n        <div\n          v-if=\"loop || index < items.length - 1\"\n          class=\"PhotoSlider__ArrowRight\"\n          @click=\"handleNext\"\n        >\n          <arrow-right />\n        </div>\n      </template>\n      <div\n        v-if=\"currentItem.intro\"\n        class=\"PhotoSlider__FooterWrap\"\n      >\n        {{ currentItem.intro }}\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, computed, toRefs, PropType } from 'vue';\nimport PhotoView from '../PhotoView/index.vue';\nimport { horizontalOffset, minSwitchImageOffset } from '../constant';\nimport useBodyEffect from './useBodyEffect';\nimport useInnerWidth from './useInnerWidth';\nimport Close from './Close.vue';\nimport ArrowLeft from './ArrowLeft.vue';\nimport ArrowRight from './ArrowRight.vue';\nimport RotateLeft from './RotateLeft.vue';\nimport RotateRight from './RotateRight.vue';\nimport FlipHorizontal from './FlipHorizontal.vue';\nimport FlipVertical from './FlipVertical.vue';\nimport Download from './Download.vue';\nimport useAnimationHandle from './useAnimationHandle';\nimport { ItemType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport isTouchDevice from '../utils/isTouchDevice';\n\nexport default defineComponent({\n  name: 'PhotoSlider',\n  components: {\n    PhotoView,\n    Close,\n    ArrowLeft,\n    ArrowRight,\n    RotateLeft,\n    RotateRight,\n    FlipHorizontal,\n    FlipVertical,\n    Download,\n  },\n  props: {\n    /**\n     * 图片列表\n     */\n    items: {\n      type: Array as PropType<ItemType[]>,\n      required: true,\n    },\n    /**\n     * 图片当前索引\n     */\n    index: {\n      type: Number,\n      required: true,\n    },\n    /**\n     * 是否显示模态框\n     */\n    visible: {\n      type: Boolean,\n      required: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 是否切换显隐覆盖物\n     */\n    toggleOverlay: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * 是否循环显示预览图\n     */\n    loop: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 下载图片方法，不传使用内置的下载方法\n     */\n    downloadMethod: {\n      type: Function as PropType<(item: ItemType) => void | null>,\n      default: null,\n    }\n  },\n  emits: ['clickPhoto', 'clickMask', 'changeIndex', 'closeModal'],\n  setup(props) {\n    const { items, index, visible } = toRefs(props);\n    const currentItem = computed<ItemType>(() => {\n      return items.value[index.value] || {};\n    });\n\n    useBodyEffect(visible);\n    const {\n      photoVisible, showAnimateType, originRect, onShowAnimateEnd\n    } = useAnimationHandle(visible, currentItem);\n    const { innerWidth } = useInnerWidth();\n\n    return {\n      innerWidth,\n      currentItem,\n      photoVisible,\n      showAnimateType,\n      originRect,\n      onShowAnimateEnd,\n    };\n  },\n  data() {\n    return {\n      // 常量\n      horizontalOffset,\n      ShowAnimateEnum,\n      isTouchDevice,\n      // 触摸相关\n      touched: false,\n      hasMove: false,\n      needTransition: false,\n      clientX: 0,\n      clientY: 0,\n      touchMoveX: 0,\n      backdropOpacity: this.defaultBackdropOpacity,\n      // 是否显示覆盖物\n      overlayVisible: true,\n      // 虚拟下标，用于循环预览\n      virtualIndex: 0,\n      // photo-view 子组件\n      photoViewRefs: {} as { [key: string]: InstanceType<typeof PhotoView> },\n    };\n  },\n  computed: {\n    // 当前显示的图片列表\n    showItems() {\n      const len = this.items.length;\n      if (this.loop) {\n        const connect = this.items.concat(this.items).concat(this.items);\n        return connect.slice(len + this.index - 1, len + this.index + 2);\n      }\n      return this.items.slice(Math.max(this.index - 1, 0), Math.min(this.index + 2, len));\n    }\n  },\n  created() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  },\n  beforeUpdate() {\n    this.photoViewRefs = {};\n  },\n  methods: {\n    defaultDownloadMethod(item: ItemType) {\n      const paths = item.src.split('/');\n      const name = paths[paths.length - 1];\n\n      const img = new Image();\n      img.setAttribute('crossOrigin', 'Anonymous');\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        const context = canvas.getContext('2d');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context?.drawImage(img, 0, 0, img.width, img.height);\n        canvas.toBlob(blob => {\n          if (blob) {\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.download = item.downloadName || name;\n            a.href = url;\n            a.dispatchEvent(new MouseEvent('click'));\n            // 释放 createObjectURL 创建的内存对象（否则以 blob:http 开头的 url 可以到浏览器访问，多次创建内存会不断增大）\n            URL.revokeObjectURL(url);\n          }\n        });\n      };\n      img.src = item.src + '?v=' + Date.now();\n    },\n    handleDownload() {\n      const item = this.items[this.index];\n      if (typeof this.downloadMethod === 'function') {\n        this.downloadMethod(item);\n      } else {\n        this.defaultDownloadMethod(item);\n      }\n    },\n    toggleFlipHorizontal() {\n      this.photoViewRefs[this.currentItem.key]?.toggleFlipHorizontal();\n    },\n    toggleFlipVertical() {\n      this.photoViewRefs[this.currentItem.key]?.toggleFlipVertical();\n    },\n    handleRotateLeft() {\n      this.photoViewRefs[this.currentItem.key]?.handleRotateLeft();\n    },\n    handleRotateRight() {\n      this.photoViewRefs[this.currentItem.key]?.handleRotateRight();\n    },\n    setPhotoViewRef(key: string, ref: InstanceType<typeof PhotoView>) {\n      this.photoViewRefs[key] = ref;\n    },\n    handleKeyDown(e: KeyboardEvent) {\n      if (this.visible) {\n        switch (e.code) {\n          case 'ArrowLeft':\n            this.handlePrevious();\n            break;\n          case 'ArrowRight':\n            this.handleNext();\n            break;\n          case 'Escape':\n            this.handleClickClose();\n            break;\n        }\n      }\n    },\n    handleSingleTap(_clientX: number, _clientY: number, e: MouseEvent | TouchEvent) {\n      if (this.toggleOverlay) {\n        this.overlayVisible = !this.overlayVisible;\n      }\n      this.$emit('clickPhoto', e);\n    },\n    handleTouchStart(clientX: number, clientY: number) {\n      this.touched = true;\n      this.needTransition = false;\n      this.clientX = clientX;\n      this.clientY = clientY;\n    },\n    handleTouchMove(touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) {\n      if (touchType === TouchTypeEnum.Scale && lastScale !== 1) {\n        this.handleTouchScaleMove(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalMove(clientX, clientY);\n      }\n    },\n    handleTouchScaleMove(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      let touchMoveX = clientX - this.clientX;\n      if (\n        (touchMoveX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) ||\n        (touchMoveX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n      ) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n    },\n    handleTouchHorizontalMove(clientX: number) {\n      let touchMoveX = clientX - this.clientX;\n\n      // 非循环模式下，第一张和最后一张超出时拖拽距离减半\n      if (\n        !this.loop &&\n        ((this.index === 0 && touchMoveX > 0) || (this.index === this.items.length - 1 && touchMoveX < 0))\n      ) {\n        touchMoveX = touchMoveX / 2;\n      }\n\n      this.hasMove = clientX !== this.clientX;\n      this.touchMoveX = touchMoveX;\n    },\n    handleTouchVerticalMove(clientX: number, clientY: number) {\n      let touchMoveY = Math.abs(clientY - this.clientY);\n      const opacity = Math.max(\n        Math.min(this.defaultBackdropOpacity, this.defaultBackdropOpacity - touchMoveY / 100 / 4),\n        0\n      );\n\n      this.hasMove = clientX !== this.clientX || clientY !== this.clientY;\n      this.backdropOpacity = opacity;\n    },\n    handleTouchEnd(touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) {\n      if (touchType === TouchTypeEnum.Scale && lastScale !== 1) {\n        this.handleTouchScaleEnd(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalEnd(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalEnd(clientY);\n      }\n      // 只要移动过，则需要动画过渡\n      if (this.hasMove) {\n        this.needTransition = true;\n      }\n      this.touched = false;\n      this.hasMove = false;\n      this.clientX = 0;\n      this.clientY = 0;\n      this.touchMoveX = 0;\n    },\n    handleTouchScaleEnd(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset && edgeTypes.includes(EdgeTypeEnum.Right)) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset && edgeTypes.includes(EdgeTypeEnum.Left)) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchHorizontalEnd(clientX: number) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchVerticalEnd(clientY: number) {\n      const offsetY = clientY - this.clientY;\n\n      if (Math.abs(offsetY) > window.innerHeight * 0.14) {\n        this.$emit('closeModal');\n      } else {\n        this.resetBackdropOpacity();\n      }\n    },\n    resetBackdropOpacity() {\n      this.backdropOpacity = this.defaultBackdropOpacity;\n    },\n    resetNeedTransition() {\n      this.needTransition = false;\n    },\n    handlePrevious() {\n      const len = this.items.length;\n      if (!this.loop && this.index === 0) return;\n      this.$emit('changeIndex', (this.index + len - 1) % len);\n      this.virtualIndex -= 1;\n    },\n    handleNext() {\n      const len = this.items.length;\n      if (!this.loop && this.index === len - 1) return;\n      this.$emit('changeIndex', (this.index + 1) % len);\n      this.virtualIndex += 1;\n    },\n    handleClickMask(e: MouseEvent | TouchEvent) {\n      this.$emit('clickMask', e);\n    },\n    handleClickClose() {\n      this.$emit('closeModal');\n    },\n    // 当预览下一张时，currentIndex 会从 1 变成 0，相当于左移一个单位，所以此时只需要右移一个单位的来平衡 transform 的左移即可\n    getItemLeft(currentIndex: number) {\n      let index = this.virtualIndex + currentIndex;\n      // 非循环模式的第一张图片不需要左移，因为只有两张图片，左侧没有图片\n      if (this.loop || this.index !== 0) {\n        index -= 1;\n      }\n      return `${(this.innerWidth + this.horizontalOffset) * index}px`;\n    },\n    getItemTransition() {\n      const transition = 'transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)';\n      if (this.needTransition) {\n        return transition;\n      }\n      if (this.hasMove) {\n        return undefined;\n      }\n      return this.shouldTransition ? transition : undefined;\n    },\n    getItemTransform() {\n      return `translate3d(${-(this.innerWidth + this.horizontalOffset) * this.virtualIndex + this.touchMoveX}px, 0px, 0px)`;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__fade {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Clean {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 0;\n      }\n    }\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Hide {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n  }\n}\n\n.PhotoSlider__Wrapper {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 2000;\n  user-select: none;\n\n  .PhotoSlider__Backdrop {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n\n    &.PhotoSlider__fadeIn {\n      opacity: 0;\n      animation: PhotoView__fade 0.4s linear both;\n    }\n    &.PhotoSlider__fadeOut {\n      opacity: 1;\n      animation: PhotoView__fade 0.4s linear both reverse;\n    }\n  }\n\n  .PhotoSlider__BannerWrap {\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 44px;\n    color: white;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .PhotoSlider__Counter {\n      padding: 0 10px;\n      font-size: 14px;\n      opacity: 0.75;\n    }\n\n    .PhotoSlider__BannerRight {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n\n      .PhotoSlider__BannerIcon {\n        vertical-align: top;\n        box-sizing: border-box;\n        padding: 10px;\n        opacity: 0.75;\n        cursor: pointer;\n        transition: all 0.2s linear;\n\n        @media (any-hover: hover){\n          &:hover {\n            opacity: 1;\n          }\n        }\n      }\n    }\n  }\n\n  .PhotoSlider__PhotoBox {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    overflow: hidden;\n  }\n\n  .PhotoSlider__ArrowLeft {\n    left: 0;\n  }\n\n  .PhotoSlider__ArrowRight {\n    right: 0;\n  }\n\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    margin: auto 0 auto 0;\n    width: 70px;\n    height: 100px;\n    opacity: 0.7;\n    z-index: 20;\n    cursor: pointer;\n    transition: opacity 0.2s linear;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    svg {\n      box-sizing: content-box;\n      padding: 10px;\n      width: 24px;\n      height: 24px;\n      fill: white;\n      background: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  .PhotoSlider__FooterWrap {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    box-sizing: border-box;\n    width: 100%;\n    min-height: 44px;\n    padding: 10px;\n    line-height: 1.5;\n    font-size: 14px;\n    text-align: justify;\n    color: #ccc;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <!-- @slot 默认插槽 -->\n  <slot />\n  <photo-slider\n    :visible=\"visible\"\n    :index=\"index\"\n    :should-transition=\"shouldTransition\"\n    :toggle-overlay=\"!photoClosable\"\n    :default-backdrop-opacity=\"defaultBackdropOpacity\"\n    :items=\"items\"\n    :loop=\"loop\"\n    :download-method=\"downloadMethod\"\n    @clickPhoto=\"handleClickPhoto\"\n    @clickMask=\"handleClickMask\"\n    @changeIndex=\"updateIndex\"\n    @closeModal=\"handleHide\"\n  />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, provide } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport useItems from './useItems';\nimport useVisible from './useVisible';\nimport useIndex from './useIndex';\nimport PhotoSlider from '../PhotoSlider/index.vue';\nimport { ItemType } from '../types';\n\nexport default defineComponent({\n  name: 'PhotoProvider',\n  components: {\n    PhotoSlider\n  },\n  props: {\n    /**\n     * 图片点击是否关闭\n     */\n    photoClosable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 背景点击是否关闭\n     */\n    maskClosable: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * 是否循环显示预览图\n     */\n    loop: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 下载图片方法，不传使用内置的下载方法\n     */\n    downloadMethod: {\n      type: Function as PropType<(item: ItemType) => void | null>,\n      default: null,\n    }\n  },\n  emits: ['indexChange', 'visibleChange'],\n  setup(_props, { emit }) {\n    const onIndexChange = () => {\n      emit('indexChange', { index, items, visible });\n    };\n    const onVisibleChange = () => {\n      emit('visibleChange', { index, items, visible });\n    };\n    const { index, updateIndex } = useIndex(onIndexChange);\n    const { items, updateItem, removeItem } = useItems(index);\n    const { visible, handleHide, handleShow } = useVisible(items, index, onVisibleChange);\n\n    provide(updateItemKey, updateItem);\n    provide(removeItemKey, removeItem);\n    provide(handleShowKey, handleShow);\n\n    return {\n      items,\n      updateItem,\n      removeItem,\n      visible,\n      handleHide,\n      handleShow,\n      index,\n      updateIndex,\n    };\n  },\n  methods: {\n    handleClickPhoto() {\n      if (this.photoClosable) {\n        this.handleHide();\n      }\n    },\n    handleClickMask() {\n      if (this.maskClosable) {\n        this.handleHide();\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <!-- @slot 默认插槽 -->\n  <slot />\n  <photo-slider\n    :visible=\"visible\"\n    :index=\"index\"\n    :should-transition=\"shouldTransition\"\n    :toggle-overlay=\"!photoClosable\"\n    :default-backdrop-opacity=\"defaultBackdropOpacity\"\n    :items=\"items\"\n    :loop=\"loop\"\n    :download-method=\"downloadMethod\"\n    @clickPhoto=\"handleClickPhoto\"\n    @clickMask=\"handleClickMask\"\n    @changeIndex=\"updateIndex\"\n    @closeModal=\"handleHide\"\n  />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, provide } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport useItems from './useItems';\nimport useVisible from './useVisible';\nimport useIndex from './useIndex';\nimport PhotoSlider from '../PhotoSlider/index.vue';\nimport { ItemType } from '../types';\n\nexport default defineComponent({\n  name: 'PhotoProvider',\n  components: {\n    PhotoSlider\n  },\n  props: {\n    /**\n     * 图片点击是否关闭\n     */\n    photoClosable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 背景点击是否关闭\n     */\n    maskClosable: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * 是否循环显示预览图\n     */\n    loop: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 下载图片方法，不传使用内置的下载方法\n     */\n    downloadMethod: {\n      type: Function as PropType<(item: ItemType) => void | null>,\n      default: null,\n    }\n  },\n  emits: ['indexChange', 'visibleChange'],\n  setup(_props, { emit }) {\n    const onIndexChange = () => {\n      emit('indexChange', { index, items, visible });\n    };\n    const onVisibleChange = () => {\n      emit('visibleChange', { index, items, visible });\n    };\n    const { index, updateIndex } = useIndex(onIndexChange);\n    const { items, updateItem, removeItem } = useItems(index);\n    const { visible, handleHide, handleShow } = useVisible(items, index, onVisibleChange);\n\n    provide(updateItemKey, updateItem);\n    provide(removeItemKey, removeItem);\n    provide(handleShowKey, handleShow);\n\n    return {\n      items,\n      updateItem,\n      removeItem,\n      visible,\n      handleHide,\n      handleShow,\n      index,\n      updateIndex,\n    };\n  },\n  methods: {\n    handleClickPhoto() {\n      if (this.photoClosable) {\n        this.handleHide();\n      }\n    },\n    handleClickMask() {\n      if (this.maskClosable) {\n        this.handleHide();\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n", "/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n", "import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n", "import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n", "import toString from './toString.js';\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nexport default uniqueId;\n", "<template>\n  <span\n    v-if=\"$slots.default()\"\n    ref=\"root\"\n    style=\"display:inline-block;\"\n    class=\"PhotoConsumer\"\n    @click=\"handleClick\"\n  >\n    <!-- @slot 默认插槽 -->\n    <slot />\n  </span>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, inject, onMounted, onUnmounted, ref, watch, toRefs } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport uniqueId from 'lodash-es/uniqueId';\n\nexport default defineComponent({\n  name: 'PhotoConsumer',\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 图片介绍\n     */\n    intro: {\n      type: String,\n      default: null\n    },\n    /**\n     * 图片下载名称，默认图片名称\n     */\n    downloadName: {\n      type: String,\n      default: null\n    }\n  },\n  setup(props) {\n    const updateItem = inject(updateItemKey);\n    const removeItem = inject(removeItemKey);\n    const handleShow = inject(handleShowKey);\n    const root = ref<HTMLElement | null>(null);\n    const key = uniqueId();\n    const { src, intro, downloadName } = toRefs(props);\n\n    const handleClick = () => {\n      handleShow?.(key);\n    };\n    const getItem = () => ({\n      key,\n      src: src.value,\n      originRef: root.value,\n      intro: intro.value,\n      downloadName: downloadName.value\n    });\n\n    watch([src, intro, downloadName], () => {\n      updateItem?.(getItem());\n    });\n\n    onMounted(() => {\n      updateItem?.(getItem());\n    });\n    onUnmounted(() => {\n      removeItem?.(key);\n    });\n\n    return {\n      root,\n      handleClick\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "<template>\n  <span\n    v-if=\"$slots.default()\"\n    ref=\"root\"\n    style=\"display:inline-block;\"\n    class=\"PhotoConsumer\"\n    @click=\"handleClick\"\n  >\n    <!-- @slot 默认插槽 -->\n    <slot />\n  </span>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, inject, onMounted, onUnmounted, ref, watch, toRefs } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport uniqueId from 'lodash-es/uniqueId';\n\nexport default defineComponent({\n  name: 'PhotoConsumer',\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 图片介绍\n     */\n    intro: {\n      type: String,\n      default: null\n    },\n    /**\n     * 图片下载名称，默认图片名称\n     */\n    downloadName: {\n      type: String,\n      default: null\n    }\n  },\n  setup(props) {\n    const updateItem = inject(updateItemKey);\n    const removeItem = inject(removeItemKey);\n    const handleShow = inject(handleShowKey);\n    const root = ref<HTMLElement | null>(null);\n    const key = uniqueId();\n    const { src, intro, downloadName } = toRefs(props);\n\n    const handleClick = () => {\n      handleShow?.(key);\n    };\n    const getItem = () => ({\n      key,\n      src: src.value,\n      originRef: root.value,\n      intro: intro.value,\n      downloadName: downloadName.value\n    });\n\n    watch([src, intro, downloadName], () => {\n      updateItem?.(getItem());\n    });\n\n    onMounted(() => {\n      updateItem?.(getItem());\n    });\n    onUnmounted(() => {\n      removeItem?.(key);\n    });\n\n    return {\n      root,\n      handleClick\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n", "import { App } from 'vue';\nimport PhotoProvider from './PhotoProvider/index.vue';\nimport PhotoConsumer from './PhotoConsumer/index.vue';\nimport PhotoSlider from './PhotoSlider/index.vue';\n\nconst components = [\n  PhotoProvider,\n  PhotoConsumer,\n  PhotoSlider\n];\n\nconst install = (app: App): void  => {\n  components.forEach(component => {\n    app.component(component.name, component);\n  });\n};\n\nexport * from './types';\n\nexport { PhotoProvider, PhotoConsumer, PhotoSlider };\n\nexport default { install };\n"],
  "mappings": "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",
  "names": ["index", "items", "_hoisted_1", "_createElementVNode", "_hoisted_2", "_openBlock", "_createElementBlock", "_hoisted_3", "src", "freeGlobal", "root", "Symbol", "objectProto", "nativeObjectToString", "symToStringTag", "FUNC_ERROR_TEXT", "now", "ShowAnimateEnum", "TouchTypeEnum", "EdgeTypeEnum", "Spinner", "_normalizeStyle", "_createBlock", "_hoisted_4", "PhotoView", "Close", "ArrowLeft", "ArrowRight", "RotateLeft", "RotateRight", "FlipHorizontal", "FlipVertical", "Download", "ref", "_Teleport", "_toDisplayString", "_createVNode", "_Fragment", "_renderList", "PhotoSlider", "_createCommentVNode", "_renderSlot", "isArray", "PhotoProvider", "PhotoConsumer"]
}
